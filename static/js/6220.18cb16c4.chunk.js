"use strict";(self.webpackChunkmap_app=self.webpackChunkmap_app||[]).push([[6220],{55067:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(37762),r=i(15671),s=i(43144),a=i(11752),o=i(61120),l=i(60136),u=i(29388),c=i(93169),h=i(80613),f=i(64510),y=i(52424),d=i(40655),v=function(e,t){return e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col},p=function(e){(0,l.Z)(i,e);var t=(0,u.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this))._tileInfoView=e,n}return(0,s.Z)(i,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"renderChildren",value:function(e){this.sortChildren(v),this.setStencilReference(e),(0,a.Z)((0,o.Z)(i.prototype),"renderChildren",this).call(this,e)}},{key:"createRenderParams",value:function(e){var t=e.state,n=(0,a.Z)((0,o.Z)(i.prototype),"createRenderParams",this).call(this,e);return n.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,n.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),n}},{key:"prepareRenderPasses",value:function(e){var t=this,n=(0,a.Z)((0,o.Z)(i.prototype),"prepareRenderPasses",this).call(this,e);return n.push(e.registerRenderPass({name:"stencil",brushes:[d.Z],drawPhase:h.jx.DEBUG|h.jx.MAP|h.jx.HIGHLIGHT,target:function(){return t.getStencilTarget()}})),(0,c.Z)("esri-tiles-debug")&&n.push(e.registerRenderPass({name:"tileInfo",brushes:[y.Z],drawPhase:h.jx.DEBUG,target:function(){return t.children}})),n}},{key:"getStencilTarget",value:function(){return this.children}},{key:"setStencilReference",value:function(e){var t,i=1,r=(0,n.Z)(this.children);try{for(r.s();!(t=r.n()).done;){t.value.stencilRef=i++}}catch(s){r.e(s)}finally{r.f()}}}]),i}(f.Z)},72900:function(e,t,i){i.d(t,{I:function(){return h}});var n=i(29439),r=i(15671),s=i(43144),a=i(60136),o=i(29388),l=i(22753),u=i(87422),c=i(73828),h=function(e){(0,a.Z)(i,e);var t=(0,o.Z)(i);function i(e,n,s,a,o,l){var u,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:l;return(0,r.Z)(this,i),(u=t.call(this)).triangleCountReportedInDebug=0,u.triangleCount=0,u.texture=null,u.key=new c.Z(e),u.resolution=n,u.x=s,u.y=a,u.width=o,u.height=l,u.rangeX=h,u.rangeY=f,u}return(0,s.Z)(i,[{key:"destroy",value:function(){this.texture&&(this.texture.dispose(),this.texture=null)}},{key:"setTransform",value:function(e){var t=this.resolution/(e.resolution*e.pixelRatio),i=this.transforms.tileMat3,r=e.toScreenNoRotation([0,0],[this.x,this.y]),s=(0,n.Z)(r,2),a=s[0],o=s[1],u=this.width/this.rangeX*t,c=this.height/this.rangeY*t;(0,l.s)(i,u,0,0,0,c,0,a,o,1),(0,l.m)(this.transforms.dvs,e.displayViewMat3,i)}}]),i}(u.s)},40639:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(15671),r=i(43144),s=i(60136),a=i(29388),o=i(27366),l=i(41691),u=i(49861),c=(i(25243),i(63780),i(69912)),h=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).tiles=new Map,r}return(0,r.Z)(i,[{key:"destroy",value:function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}},{key:"updating",get:function(){return this.isUpdating()}},{key:"acquireTile",value:function(e){var t=this,i=this.createTile(e);return i.once("isReady",(function(){return t.notifyChange("updating")})),this.tiles.set(e.id,i),i}},{key:"forceAttributeTextureUpload",value:function(){}},{key:"forEachTile",value:function(e){this.tiles.forEach(e)}},{key:"releaseTile",value:function(e){this.tiles.delete(e.key.id),this.disposeTile(e)}},{key:"isUpdating",value:function(){var e=!0;return this.tiles.forEach((function(t){e=e&&t.isReady})),!e}},{key:"setHighlight",value:function(){}},{key:"invalidateLabels",value:function(){}},{key:"requestUpdate",value:function(){this.layerView.requestUpdate()}}]),i}(l.r);(0,o._)([(0,u.Cb)()],h.prototype,"layer",void 0),(0,o._)([(0,u.Cb)()],h.prototype,"layerView",void 0),(0,o._)([(0,u.Cb)()],h.prototype,"tileInfoView",void 0),(0,o._)([(0,u.Cb)()],h.prototype,"updating",null);var f=h=(0,o._)([(0,c.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],h)},46598:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i(15671),r=i(43144),s=i(60136),a=i(29388),o=i(27366),l=(i(32718),i(25243),i(63780),i(10064),i(93169),i(69912)),u=i(27811),c=i(9849),h=i(40639),f=function(){function e(){(0,n.Z)(this,e),this.gradient=null,this.height=512,this.intensities=null,this.width=512}return(0,r.Z)(e,[{key:"render",value:function(e){(0,u.hy)(e,512,this.intensities,this.gradient,this.minDensity,this.maxDensity)}}]),e}(),y=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e))._intensityInfo={minDensity:0,maxDensity:0},r.type="heatmap",r.featuresView={attributeView:{initialize:function(){},requestUpdate:function(){}},requestRender:function(){}},r._container=new c.s(e.tileInfoView),r}return(0,r.Z)(i,[{key:"createTile",value:function(e){var t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}},{key:"onConfigUpdate",value:function(){var e=this,t=this.layer.renderer;if("heatmap"===t.type){var i=t.minDensity,n=t.maxDensity,r=t.colorStops;this._intensityInfo.minDensity=i,this._intensityInfo.maxDensity=n,this._gradient=(0,u.uI)(r),this.tiles.forEach((function(t){var r=t.bitmap.source;r&&(r.minDensity=i,r.maxDensity=n,r.gradient=e._gradient,t.bitmap.invalidateTexture())}))}}},{key:"hitTest",value:function(){return Promise.resolve([])}},{key:"install",value:function(e){e.addChild(this._container)}},{key:"uninstall",value:function(e){this._container.removeAllChildren(),e.removeChild(this._container)}},{key:"disposeTile",value:function(e){this._container.removeChild(e),e.destroy()}},{key:"supportsRenderer",value:function(e){return e&&"heatmap"===e.type}},{key:"onTileData",value:function(e){var t=this.tiles.get(e.tileKey);if(t){var i=e.intensityInfo,n=this._intensityInfo,r=n.minDensity,s=n.maxDensity,a=t.bitmap.source||new f;a.intensities=i&&i.matrix||null,a.minDensity=r,a.maxDensity=s,a.gradient=this._gradient,t.bitmap.source=a,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}}},{key:"onTileError",value:function(e){console.error(e)}},{key:"lockGPUUploads",value:function(){}},{key:"unlockGPUUploads",value:function(){}},{key:"fetchResource",value:function(e,t){return console.error(e),Promise.reject()}}]),i}(h.Z),d=y=(0,o._)([(0,l.j)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],y)}}]);
//# sourceMappingURL=6220.18cb16c4.chunk.js.map